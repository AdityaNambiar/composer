<!--
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

 http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
-->
<!doctype html>
<html lang="en">
<!--
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

 http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
-->
  
  
  

<!--
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

 http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
-->
<head>
  <meta charset="utf-8">
  
    <title>Developer Tutorial | Hyperledger Composer</title>
  
  <meta name="viewport" content="width=device-width">
  <link rel="icon" type="image/x-icon" href="/composer/unstable/favicon.ico">
  <meta name="google-site-verification" content="fBQRJ6h7MV7_TJ7grbgq4P-d-07NRfDWPe4pqEEoH5w">
  <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">

  

  
    <link href="/composer/unstable/assets/css/normalize.css" rel="stylesheet">
    <link href="/composer/unstable/assets/css/new-style.min.css" rel="stylesheet">
    <link href="/composer/unstable/assets/css/grid-layout.min.css" rel="stylesheet">
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.6.0/clipboard.min.js"></script>
  
</head>


<body class="">

  
  <!-- % include navbar.html % -->
  

  <div class="SiteWrapper">
    
      <!--
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

 http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
-->
<div class="homepage-callout">
  <div class="callout-copy">
      <p><strong>Update Aug 29th 2019: </strong>Hyperledger Composer has been deprecated. Please see the <a href="https://github.com/hyperledger/composer/blob/master/README.md">README</a> for more information.</p>
  </div>
</div>
<div class="content">
    <article class="docs-container">
        <!-- If there's a sidebar, divide into 2 columns -->
        
        <div class="page-sidebar-grid" id="off-canvas">
          <!-- <a class="toggle close" href="#">close</a> -->
          <div class="docs-pagenav-grid">
            <!--
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

 http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
-->
<!-- Navigation -->
  <nav class="navbar-docs" role="navigation">
        <!-- Brand and toggle get grouped for better mobile display -->
            <a class="navbar-brand" href="/composer/unstable/index.html"><b>Hyperledger</b> Composer</a>
        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <div class="top-nav-docs">
                <!-- <li>
                    <a href="services.html">Composer</a>
                </li> -->
                <!-- <li>
                    <a href="https://composer-playground.mybluemix.net/">Playground</a>
                </li> -->
                    <a href="../tutorials/tutorials.html">Tutorials</a>
                    <a href="../introduction/introduction.html">Docs</a>
                    <a href="../support/support-index.html">Community</a>
            </div>
        </div>
</nav>

          </div>

          <select id="version" name="version" onchange="location = this.options[this.selectedIndex].value;">
              <option>Select version</option>
              <option value="/composer/latest/introduction/introduction.html" title="The most stable version of Composer">Latest</option>
              <option value="/composer/unstable/introduction/introduction.html" title="The version that will replace Latest">Latest-unstable</option>
          </select>

            <div class="search-form">
              <form action="/composer/unstable/search/search.html" method="get">
                <!-- <label for="search-box">Search</label> -->

                <input type="text" id="search-box"  class="search-box" name="query" placeholder="Search here...">
                <input type="submit" class="submit-input hide" value="">

                <div class="search-icon">
                  <img src="/composer/unstable/assets/img/Search_Icon_1.svg" class="trigger" type="submit">
                </div>
              </form>
            </div>

          <div class="docs-current-page-grid">
          <p>Developer Tutorial</p>
          </div>

          <nav class="context-nav">
            
            
              <ul>
<li><p><a href="/composer/unstable/introduction/introduction"><b>Introduction</b><img src="/composer/unstable/assets/img/Caret_SW_2.svg" class="caret"></a></p>

<ul>
<li><a href="/composer/unstable/introduction/key-concepts">Key Concepts</a></li>
<li><a href="/composer/unstable/introduction/solution-architecture">Typical Solution Architecture</a></li>
</ul></li>
<li><p><a href="/composer/unstable/installing/installing-index"><b>Installing</b><img src="/composer/unstable/assets/img/Caret_SW_2.svg" class="caret"></a></p>

<ul>
<li><a href="/composer/unstable/installing/installing-prereqs">Installing pre-requisites</a></li>
<li><a href="/composer/unstable/installing/development-tools">Installing the development environment</a></li>
<li><a href="/composer/unstable/installing/update-dev-env">Updating the development environment</a></li>
<li><a href="/composer/unstable/installing/uninstall-dev-env">Uninstalling the development environment</a></li>
</ul></li>
<li><p><a href="/composer/unstable/tutorials/tutorials"><b>Tutorials</b><img src="/composer/unstable/assets/img/Caret_SW_2.svg" class="caret"></a></p>

<ul>
<li><a href="/composer/unstable/tutorials/playground-tutorial">Playground Tutorial</a></li>
<li><a href="/composer/unstable/tutorials/developer-tutorial">Developer Tutorial</a></li>
<li><a href="/composer/unstable/tutorials/queries">Queries Tutorial</a></li>
<li><a href="/composer/unstable/tutorials/deploy-to-fabric-single-org">Deploying to a single organization Hyperledger Fabric</a></li>
<li><a href="/composer/unstable/tutorials/deploy-to-fabric-multi-org">Deploying to a multi-organization Hyperledger Fabric</a></li>
<li><a href="/composer/unstable/tutorials/invoke-composer-network">Interacting with other business networks</a></li>
<li><a href="/composer/unstable/tutorials/acl-trading">Access Control Tutorial - Commodity Trading</a></li>
<li><a href="/composer/unstable/tutorials/google_oauth2_rest">Using Google OAUTH2.0 with a Composer REST server</a></li>
</ul></li>
<li><p><a href="/composer/unstable/playground/playground-index"><b>Using Playground</b><img src="/composer/unstable/assets/img/Caret_SW_2.svg" class="caret"></a></p>

<ul>
<li><a href="/composer/unstable/playground/id-cards-playground">Business Network Cards</a></li>
</ul></li>
<li><p><a href="/composer/unstable/business-network/business-network-index"><b>Developing Business Networks</b><img src="/composer/unstable/assets/img/Caret_SW_2.svg" class="caret"></a></p>

<ul>
<li><a href="/composer/unstable/business-network/businessnetworkdefinition">Business Network Definitions</a></li>
<li><a href="/composer/unstable/business-network/bnd-create">Create a Business Network Definition</a></li>
<li><a href="/composer/unstable/business-network/bnd-deploy">Deploying Business Networks</a></li>
<li><a href="/composer/unstable/business-network/publishing-events">Emitting Events</a></li>
<li><a href="/composer/unstable/business-network/testing">Testing Business Networks</a></li>
<li><a href="/composer/unstable/business-network/bnd-publish">Publish Models or Business Network Definitions</a></li>
<li><a href="/composer/unstable/business-network/upgrading-bna">Upgrading a deployed business network</a></li>
<li><a href="/composer/unstable/business-network/query">Using Queries and Filters with Business Network Data</a></li>
<li><a href="/composer/unstable/business-network/programmatic-access-control">Programmatic access control</a></li>
<li><a href="/composer/unstable/business-network/historian">Hyperledger Composer Historian</a></li>
<li><a href="/composer/unstable/business-network/cloud-wallets">Customising card stores</a></li>
</ul></li>
<li><p><a href="/composer/unstable/applications/applications-index"><b>Developing Applications</b><img src="/composer/unstable/assets/img/Caret_SW_2.svg" class="caret"></a></p>

<ul>
<li><a href="/composer/unstable/applications/node">Writing a Node.js application</a></li>
<li><a href="/composer/unstable/applications/web">Writing Web applications</a></li>
<li><a href="/composer/unstable/applications/subscribing-to-events">Subscribing to events</a></li>
</ul></li>
<li><p><a href="/composer/unstable/integrating/integrating-index"><b>Integrating Existing Systems</b><img src="/composer/unstable/assets/img/Caret_SW_2.svg" class="caret"></a></p>

<ul>
<li><a href="/composer/unstable/integrating/getting-started-rest-api">Generating a REST API</a></li>
<li><a href="/composer/unstable/integrating/publishing-events">Publishing events from the REST server</a></li>
<li><a href="/composer/unstable/integrating/enabling-rest-authentication">Enabling authentication for the REST server</a></li>
<li><a href="/composer/unstable/integrating/enabling-multiuser">Enabling multiple user mode for the REST server</a></li>
<li><a href="/composer/unstable/integrating/securing-the-rest-server">Securing the REST server using HTTPS and TLS</a></li>
<li><a href="/composer/unstable/integrating/deploying-the-rest-server">Deploying the REST server for a business network</a></li>
<li><a href="/composer/unstable/integrating/customizing-the-rest-server">Customizing the REST server for a business network</a></li>
<li><a href="/composer/unstable/integrating/node-red">Integrating with Node-RED</a></li>
<li><a href="/composer/unstable/integrating/call-out">Calling external HTTP or REST services</a></li>
</ul></li>
<li><p><a href="/composer/unstable/managing/managingindex"><b>Managing a Deployed Business Network</b><img src="/composer/unstable/assets/img/Caret_SW_2.svg" class="caret"></a></p>

<ul>
<li><a href="/composer/unstable/managing/participantsandidentities">Participants and identities</a></li>
<li><a href="/composer/unstable/managing/participant-add">Adding participants</a></li>
<li><a href="/composer/unstable/managing/id-cards-playground">Creating, Exporting, and Importing Business Network Cards</a></li>
<li><a href="/composer/unstable/managing/identity-issue">Issuing a new identity to a participant</a></li>
<li><a href="/composer/unstable/managing/identity-bind">Binding an existing identity to a participant</a></li>
<li><a href="/composer/unstable/managing/identity-list">Listing all identities in a business network</a></li>
<li><a href="/composer/unstable/managing/identity-revoke">Revoking an identity from a participant</a></li>
<li><a href="/composer/unstable/managing/connector-information">Interacting with Hyperledger Fabric</a></li>
</ul></li>
<li><p><a href="/composer/unstable/problems/diagnostics"><b>Diagnosing Problems</b><img src="/composer/unstable/assets/img/Caret_SW_2.svg" class="caret"></a></p></li>
<li><p><a href="/composer/unstable/reference/reference-index"><b>Reference</b><img src="/composer/unstable/assets/img/Caret_SW_2.svg" class="caret"></a></p>

<ul>
<li><a href="/composer/unstable/reference/MeetTheModules">Hyperledger Composer npm Modules</a></li>
<li><a href="/composer/unstable/reference/cto_language">Modeling Language</a></li>
<li><a href="/composer/unstable/reference/acl_language">Access Control Language</a></li>
<li><a href="/composer/unstable/reference/query-language">Query Language</a></li>
<li><a href="/composer/unstable/reference/model-compatibility">Model Compatibility</a></li>
<li><a href="/composer/unstable/reference/connectionprofile">Connection Profiles</a></li>
<li><a href="/composer/unstable/reference/js_scripts">Transaction Processor Functions</a></li>
<li><a href="/composer/unstable/reference/commands">Hyperledger Composer CLI Commands</a></li>
<li><a href="/composer/unstable/reference/rest-server">Hyperledger Composer REST Server</a></li>
<li><a href="/composer/unstable/reference/glossary">Hyperledger Composer Glossary of Terms</a></li>
</ul></li>
<li><p><a href="/composer/unstable/support/support-index"><b>Support</b><img src="/composer/unstable/assets/img/Caret_SW_2.svg" class="caret"></a></p></li>
<li><p><a href="/composer/unstable/api/api-doc-index"><b>API Reference</b><img src="/composer/unstable/assets/img/Caret_SW_2.svg" class="caret"></a></p>

<ul>
<li><a href="/composer/unstable/api/allData">API Class Index</a></li>
<li><a href="/composer/unstable/api/admin-adminconnection">AdminConnection (Admin API)</a></li>
<li><a href="/composer/unstable/api/client-assetregistry">AssetRegistry (Client API)</a></li>
<li><a href="/composer/unstable/api/client-businessnetworkconnection">BusinessNetworkConnection (Client API)</a></li>
<li><a href="/composer/unstable/api/client-historian">Historian (Client API)</a></li>
<li><a href="/composer/unstable/api/client-identityregistry">IdentityRegistry (Client API)</a></li>
<li><a href="/composer/unstable/api/client-participantregistry">ParticipantRegistry (Client API)</a></li>
<li><a href="/composer/unstable/api/client-query">Query (Client API)</a></li>
<li><a href="/composer/unstable/api/client-registry">Registry (Client API)</a></li>
<li><a href="/composer/unstable/api/client-transactionregistry">TransactionRegistry (Client API)</a></li>
<li><a href="/composer/unstable/api/common-assetdeclaration">AssetDeclaration (Common API)</a></li>
<li><a href="/composer/unstable/api/common-businessnetworkcardstore">BusinessNetworkCardStore (Common API)</a></li>
<li><a href="/composer/unstable/api/common-businessnetworkdefinition">BusinessNetworkDefinition (Common API)</a></li>
<li><a href="/composer/unstable/api/common-businessnetworkmetadata">BusinessNetworkMetadata (Common API)</a></li>
<li><a href="/composer/unstable/api/common-classdeclaration">ClassDeclaration (Common API)</a></li>
<li><a href="/composer/unstable/api/common-conceptdeclaration">ConceptDeclaration (Common API)</a></li>
<li><a href="/composer/unstable/api/common-concept">Concept (Common API)</a></li>
<li><a href="/composer/unstable/api/common-decoratorfactory">DecoratorFactory (Common API)</a></li>
<li><a href="/composer/unstable/api/common-decorator">Decorator (Common API)</a></li>
<li><a href="/composer/unstable/api/common-enumdeclaration">EnumDeclaration (Common API)</a></li>
<li><a href="/composer/unstable/api/common-enumvaluedeclaration">EnumValueDeclaration (Common API)</a></li>
<li><a href="/composer/unstable/api/common-eventdeclaration">EventDeclaration (Common API)</a></li>
<li><a href="/composer/unstable/api/common-factory">Factory (Common API)</a></li>
<li><a href="/composer/unstable/api/common-functiondeclaration">FunctionDeclaration (Common API)</a></li>
<li><a href="/composer/unstable/api/common-idcard">IdCard (Common API)</a></li>
<li><a href="/composer/unstable/api/common-identifiable">Identifiable (Common API)</a></li>
<li><a href="/composer/unstable/api/common-introspector">Introspector (Common API)</a></li>
<li><a href="/composer/unstable/api/common-modelfile">ModelFile (Common API)</a></li>
<li><a href="/composer/unstable/api/common-modelmanager">ModelManager (Common API)</a></li>
<li><a href="/composer/unstable/api/common-participantdeclaration">ParticipantDeclaration (Common API)</a></li>
<li><a href="/composer/unstable/api/common-property">Property (Common API)</a></li>
<li><a href="/composer/unstable/api/common-relationshipdeclaration">RelationshipDeclaration (Common API)</a></li>
<li><a href="/composer/unstable/api/common-relationship">Relationship (Common API)</a></li>
<li><a href="/composer/unstable/api/common-resource">Resource (Common API)</a></li>
<li><a href="/composer/unstable/api/common-serializer">Serializer (Common API)</a></li>
<li><a href="/composer/unstable/api/common-transactiondeclaration">TransactionDeclaration (Common API)</a></li>
<li><a href="/composer/unstable/api/common-typed">Typed (Common API)</a></li>
<li><a href="/composer/unstable/api/common-validatedconcept">ValidatedConcept (Common API)</a></li>
<li><a href="/composer/unstable/api/common-validatedresource">ValidatedResource (Common API)</a></li>
<li><a href="/composer/unstable/api/runtime-api">Api (Runtime API)</a></li>
<li><a href="/composer/unstable/api/runtime-assetregistry">AssetRegistry (Runtime API)</a></li>
<li><a href="/composer/unstable/api/runtime-factory">Factory (Runtime API)</a></li>
<li><a href="/composer/unstable/api/runtime-participantregistry">ParticipantRegistry (Runtime API)</a></li>
<li><a href="/composer/unstable/api/runtime-query">Query (Runtime API)</a></li>
<li><a href="/composer/unstable/api/runtime-serializer">Serializer (Runtime API)</a></li>
</ul></li>
<li><p><a href="/composer/unstable/systemns/systemns-index"><b>System Namespace Reference</b><img src="/composer/unstable/assets/img/Caret_SW_2.svg" class="caret"></a></p>

<ul>
<li><a href="/composer/unstable/systemns/01_summary">Summary</a></li>
<li><a href="/composer/unstable/systemns/02_assets">Assets</a></li>
<li><a href="/composer/unstable/systemns/03_participants">Participants</a></li>
<li><a href="/composer/unstable/systemns/04_transactions">Transactions</a></li>
<li><a href="/composer/unstable/systemns/05_events">Events</a></li>
<li><a href="/composer/unstable/systemns/06_enums">Enums</a></li>
</ul></li>
</ul>

            
                <div class="docs-footer-grid">
                <!--
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

 http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
-->
<div class="footer-bg-break docs-footer-break">
<div class="footer-container-break">
    <div class="footer-left-break">
      <p>Released under the Apache License v2.0</p>
    </div>
  <div class="footer-right-break">
    <ul>
      <li><a href="https://github.com/hyperledger/composer">GitHub</a></li>
      <li><a href="http://stackoverflow.com/questions/tagged/hyperledger-composer">Stack Overflow</a></li>
    </ul>
  </div>
</div>
</div>

                </div>
          </nav>
        </div>
        <div class="page-content-grid">
          <section class="content-chunk">
            <!-- <a class="toggle open" href="#nav">open</a> -->
            
              <h1 id="developer-tutorial-for-creating-a-hyperledger-composer-solution">Developer tutorial for creating a Hyperledger Composer solution</h1>

<p>This tutorial will walk you through building a Hyperledger Composer blockchain solution from scratch. In the space of a few hours you will be able to go from an idea for a disruptive blockchain innovation, to executing transactions against a real Hyperledger Fabric blockchain network and generating/running a sample Angular 2 application that interacts with a blockchain network.</p>

<p>This tutorial gives an overview of the techniques and resources available to apply to your own use case.</p>

<p><em>Note:</em> This tutorial was written against the latest Hyperledger Composer build on Ubuntu Linux running with Hyperledger Fabric v1.2 where referenced below and also tested for a Mac environment.</p>

<h2 id="prerequisites">Prerequisites</h2>

<p>Before beginning this tutorial:</p>

<ul>
<li><a href="../installing/development-tools.html">Set up your development environment</a></li>
<li>Install an editor e.g. VSCode or Atom</li>
</ul>

<h2 id="step-one-creating-a-business-network-structure">Step One: Creating a business network structure</h2>

<p>The key concept for Hyperledger Composer is the <strong>business network definition (BND)</strong>. It defines the data model, transaction logic and access control rules for your blockchain solution. To create a BND,  we need to create a suitable project structure on disk.</p>

<p>The easiest way to get started is to use the Yeoman generator to create a skeleton business network. This will create a directory containing all of the components of a business network.</p>

<ol>
<li><p>Create a skeleton business network using Yeoman. This command will require a business network name, description, author name, author email address, license selection and namespace.</p>

<p><code-block type="commands" sub-type="yo" identifier="create-network" ></p>
<div class="highlight"><pre><code class="language-" data-lang="">yo hyperledger-composer:businessnetwork
</code></pre></div>
<p></code-block></p></li>
<li><p>Enter <code-block type="arguments" sub-type="yo" identifier="network-name" > <code>tutorial-network</code> </code-block> for the network name, and desired information for description, author name, and author email.</p></li>
<li><p>Select <code-block type="arguments" sub-type="yo" identifier="license" > <code>Apache-2.0</code> </code-block> as the license.</p></li>
<li><p>Select <code-block type="arguments" sub-type="yo" identifier="namespace" > <code>org.example.mynetwork</code> </code-block> as the namespace.</p></li>
<li><p>Select <code-block type="arguments" sub-type="yo" identifier="empty" > <code>No</code> </code-block> when asked whether to generate an empty network or not.</p></li>
</ol>

<h2 id="step-two-defining-a-business-network">Step Two: Defining a business network</h2>

<p>A business network is made up of assets, participants, transactions, access control rules, and optionally events and queries. In the skeleton business network created in the previous steps, there is a model (<code>.cto</code>) file which will contain the class definitions for all assets, participants, and transactions in the business network. The skeleton business network also contains an access control (<code>permissions.acl</code>) document with basic access control rules, a script (<code>logic.js</code>) file containing transaction processor functions, and a <code>package.json</code> file containing business network metadata.</p>

<h4 id="modelling-assets-participants-and-transactions">Modelling assets, participants, and transactions</h4>

<p>The first document to update is the model (<code>.cto</code>) file. This file is written using the <a href="../reference/cto_language.html">Hyperledger Composer Modelling Language</a>. The model file contains the definitions of each class of asset, transaction, participant, and event. It implicitly extends the Hyperledger Composer System Model described in the modelling language documentation.</p>

<ol>
<li><p>Open the <code-block type="files" sub-type="paths" identifier="model-file-name" > <code>org.example.mynetwork.cto</code> </code-block> model file.</p></li>
<li><p>Replace the contents with the following:</p>

<p><code-block type="files" sub-type="contents" identifier="model-file-content" ></p>
<div class="highlight"><pre><code class="language-" data-lang="">/**
 * My commodity trading network
 */
namespace org.example.mynetwork
asset Commodity identified by tradingSymbol {
    o String tradingSymbol
    o String description
    o String mainExchange
    o Double quantity
    --&gt; Trader owner
}
participant Trader identified by tradeId {
    o String tradeId
    o String firstName
    o String lastName
}
transaction Trade {
    --&gt; Commodity commodity
    --&gt; Trader newOwner
}
</code></pre></div>
<p></code-block></p></li>
<li><p>Save your changes to <code>org.example.mynetwork.cto</code>.</p></li>
</ol>

<h4 id="adding-javascript-transaction-logic">Adding JavaScript transaction logic</h4>

<p>In the model file, a <code>Trade</code> transaction was defined, specifying a relationship to an  asset, and a participant. The transaction processor function file contains the JavaScript logic to execute the transactions defined in the model file.</p>

<p>The <code>Trade</code> transaction is intended to simply accept the identifier of the <code>Commodity</code> asset which is being traded, and the identifier of the <code>Trader</code> participant to set as the new owner.</p>

<ol>
<li><p>Open the <code-block type="files" sub-type="paths" identifier="script-file-name" > <code>logic.js</code> </code-block> script file.</p></li>
<li><p>Replace the contents with the following:</p>

<p><code-block type="files" sub-type="contents" identifier="script-file-content" ></p>
<div class="highlight"><pre><code class="language-" data-lang=""><span class="cd">/**
 * Track the trade of a commodity from one trader to another
 * @param {org.example.mynetwork.Trade} trade - the trade to be processed
 * @transaction
 */</span>
<span class="k">async</span> <span class="k">function</span> <span class="nf">tradeCommodity</span><span class="p">(</span><span class="nx">trade</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">trade</span><span class="o">.</span><span class="nx">commodity</span><span class="o">.</span><span class="nx">owner</span> <span class="o">=</span> <span class="nx">trade</span><span class="o">.</span><span class="nx">newOwner</span><span class="p">;</span>
    <span class="nx">let</span> <span class="nx">assetRegistry</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">getAssetRegistry</span><span class="p">(</span><span class="s1">'org.example.mynetwork.Commodity'</span><span class="p">);</span>
    <span class="k">await</span> <span class="nx">assetRegistry</span><span class="o">.</span><span class="nx">update</span><span class="p">(</span><span class="nx">trade</span><span class="o">.</span><span class="nx">commodity</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<p></code-block></p></li>
<li><p>Save your changes to <code>logic.js</code>.</p></li>
</ol>

<h4 id="adding-access-control">Adding access control</h4>

<ol>
<li><p>Replace the following access control rules in the file <code-block type="files" sub-type="paths" identifier="acl-file-name" > <code>permissions.acl</code> </code-block>:</p>

<p><code-block type="files" sub-type="contents" identifier="acl-file-content" ></p>
<div class="highlight"><pre><code class="language-" data-lang="">/**
 * Access control rules for tutorial-network
 */
rule Default {
    description: "Allow all participants access to all resources"
    participant: "ANY"
    operation: ALL
    resource: "org.example.mynetwork.*"
    action: ALLOW
}

rule SystemACL {
  description:  "System ACL to permit all access"
  participant: "ANY"
  operation: ALL
  resource: "org.hyperledger.composer.system.**"
  action: ALLOW
}
</code></pre></div>
<p></code-block></p></li>
<li><p>Save your changes to <code>permissions.acl</code>.</p></li>
</ol>

<h2 id="step-three-generate-a-business-network-archive">Step Three: Generate a business network archive</h2>

<p>Now that the business network has been defined, it must be packaged into a deployable business network archive (<code>.bna</code>) file.</p>

<ol>
<li><p>Using the command line, navigate to the <code-block type="directories" sub-type="paths" identifier="created-network-folder" > <code>tutorial-network</code> </code-block> directory.</p></li>
<li><p>From the <code>tutorial-network</code> directory, run the following command:</p>

<p><code-block type="commands" sub-type="cli" identifier="archive-create" ></p>
<div class="highlight"><pre><code class="language-" data-lang="">composer archive create -t dir -n .
</code></pre></div>
<p></code-block></p></li>
</ol>

<p>After the command has run, a business network archive file called <code>tutorial-network@0.0.1.bna</code> has been created in the <code>tutorial-network</code> directory.</p>

<h2 id="step-four-deploying-the-business-network">Step Four: Deploying the business network</h2>

<p>After creating the <code>.bna</code> file, the business network can be deployed to the instance of Hyperledger Fabric. Normally, information from the Fabric administrator is required to create a <code>PeerAdmin</code> identity, with privileges to install chaincode to the peer as well as start chaincode on the <code>composerchannel</code> channel. However, as part of the development environment installation, a <code>PeerAdmin</code> identity has been created already.</p>

<p>After the business network has been installed, the network can be started. For best practice, a new identity should be created to administer the business network after deployment. This identity is referred to as a network admin.</p>

<h4 id="retrieving-the-correct-credentials">Retrieving the correct credentials</h4>

<p>A <code>PeerAdmin</code> business network card with the correct credentials is already created as part of development environment installation.</p>

<h4 id="deploying-the-business-network">Deploying the business network</h4>

<p>Deploying a business network to the Hyperledger Fabric requires the Hyperledger Composer business network to be installed on the peer, then the business network can be started, and a new participant, identity, and associated card must be created to be the network administrator. Finally, the network administrator business network card must be imported for use, and the network can then be pinged to check it is responding.</p>

<ol>
<li><p>To install the business network, from the <code>tutorial-network</code> directory, run the following command:</p>

<p><code-block type="commands" sub-type="cli" identifier="network-install" ></p>
<div class="highlight"><pre><code class="language-" data-lang="">composer network install --card PeerAdmin@hlfv1 --archiveFile tutorial-network@0.0.1.bna
</code></pre></div>
<p></code-block></p>

<p>The <code>composer network install</code> command requires a PeerAdmin business network card (in this case one has been created and imported in advance), and the the file path of the <code>.bna</code> which defines the business network.</p></li>
<li><p>To start the business network, run the following command:</p>

<p><code-block type="commands" sub-type="cli" identifier="network-start" ></p>
<div class="highlight"><pre><code class="language-" data-lang="">composer network start --networkName tutorial-network --networkVersion 0.0.1 --networkAdmin admin --networkAdminEnrollSecret adminpw --card PeerAdmin@hlfv1 --file networkadmin.card
</code></pre></div>
<p></code-block></p>

<p>The <code>composer network start</code> command requires a business network card, as well as the name of the admin identity for the business network, the name and version of the business network and the name of the file to be created ready to import as a business network card.</p></li>
<li><p>To import the network administrator identity as a usable business network card, run the following command:</p>

<p><code-block type="commands" sub-type="cli" identifier="card-import" ></p>
<div class="highlight"><pre><code class="language-" data-lang="">composer card import --file networkadmin.card
</code></pre></div>
<p></code-block></p>

<p>The <code>composer card import</code> command requires the filename specified in <code>composer network start</code> to create a card.</p></li>
<li><p>To check that the business network has been deployed successfully, run the following command to ping the network:</p>

<p><code-block type="commands" sub-type="cli" identifier="network-ping" ></p>
<div class="highlight"><pre><code class="language-" data-lang="">composer network ping --card admin@tutorial-network
</code></pre></div>
<p></code-block></p></li>
</ol>

<p>The <code>composer network ping</code> command requires a business network card to identify the network to ping.</p>

<h2 id="step-five-generating-a-rest-server">Step Five: Generating a REST server</h2>

<p>Hyperledger Composer can generate a bespoke REST API based on a business network. For developing a web application, the REST API provides a useful layer of language-neutral abstraction.</p>

<ol>
<li><p>To create the REST API, navigate to the <code-block type="directories" sub-type="paths" identifier="navigate-for-rest" > <code>tutorial-network</code> </code-block> directory and run the following command:</p>

<p><code-block type="commands" sub-type="rest-server" identifier="start-rest-server" ></p>
<div class="highlight"><pre><code class="language-" data-lang="">composer-rest-server
</code></pre></div>
<p></code-block></p></li>
<li><p>Enter <code-block type="arguments" sub-type="rest-server" identifier="admin-card" > <code>admin@tutorial-network</code> </code-block> as the card name.</p></li>
<li><p>Select <strong><code-block type="arguments" sub-type="rest-server" identifier="use-namespaces" >never</code-block> use namespaces</strong> when asked whether to use namespaces in the generated API.</p></li>
<li><p>Select <strong><code-block type="arguments" sub-type="rest-server" identifier="enable-authentication" >No</code-block></strong> when asked whether to secure the generated API.</p></li>
<li><p>Select <strong><code-block type="arguments" sub-type="rest-server" identifier="publish-events" >Yes</code-block></strong> when asked whether to enable event publication.</p></li>
<li><p>Select <strong><code-block type="arguments" sub-type="rest-server" identifier="enable-tls" >No</code-block></strong> when asked whether to enable TLS security.</p></li>
</ol>

<p>The generated API is connected to the deployed blockchain and business network.</p>

<h2 id="step-six-generating-a-skeleton-angular-application">Step Six: Generating a skeleton Angular application</h2>

<p>Hyperledger Composer can also generate an Angular 4 application running against the REST API.</p>

<ol>
<li><p>To create your Angular 4 application, navigate to <code-block type="arguments" sub-type="npm" identifier="navigate-for-angular" > <code>tutorial-network</code> </code-block> directory and run the following command:</p>

<p><code-block type="commands" sub-type="yo" identifier="create-app" ></p>
<div class="highlight"><pre><code class="language-" data-lang="">yo hyperledger-composer:angular
</code></pre></div>
<p></code-block></p></li>
<li><p>Select <strong><code-block type="arguments" sub-type="yo" identifier="live-network" >Yes</code-block></strong> when asked to connect to running business network.</p></li>
<li><p>Enter standard <code>package.json</code> questions (project name, description, author name, author email, license)</p></li>
<li><p>Enter <code-block type="arguments" sub-type="yo" identifier="card-name" > <code>admin@tutorial-network</code> </code-block> for the business network card.</p></li>
<li><p>Select <strong>Connect to an existing REST API</strong></p></li>
<li><p>Enter <code-block type="arguments" sub-type="yo" identifier="api-url" > <code>http://localhost</code> </code-block> for the REST server address.</p></li>
<li><p>Enter <code-block type="arguments" sub-type="yo" identifier="api-port" > <code>3000</code> </code-block> for server port.</p></li>
<li><p>Select <strong>Namespaces are not used</strong></p></li>
</ol>

<p>The Angular generator will then create the scaffolding for the project and install all dependencies. To run the application, navigate to your angular project directory and run <code-block type="commands" sub-type="npm" identifier="start-app" > <code>npm start</code> </code-block>. This will fire up an Angular 4 application running against your REST API at <code-block type="arguments" sub-type="request" identifier="app-url" > <code>http://localhost:4200</code> </code-block>.</p>

<p>Note: The Yo Angular application generator is aimed at generating skeleton web applications, based on simple and basic business network model definitions (such as the <code>trade-network</code> network model here). See more the Angular generator at <a href="../applications/web.html">Writing Web Applications</a></p>

            
          </section>
        </div>
        <!-- Otherwise, have the main content fill all 12 columns... -->
        
      <div class="PageNavigation">
    
    
  </div>
    </article>
</div>
<script>
(function (document) {
    function clipboard_init() {
        var charts = document.querySelectorAll("div.highlight"),
            arr = [],
            i, j, maxItem, pre, btn, el;

        // Make sure we are dealing with an array
        for(i = 0, maxItem = charts.length; i < maxItem; i++) arr.push(charts[i]);

        // Find the UML source element and get the text
        for (i = 0, maxItem = arr.length; i < maxItem; i++) {
            el = arr[i];
            pre = el.childNodes[0];

            pre.id = "hl_code" + i.toString();
            btn = document.createElement('copy-button');
            btn.appendChild(document.createTextNode('Copy'));
            btn.setAttribute("class", "copy-btn");
            btn.setAttribute("data-clipboard-target", "#hl_code" + i.toString());
            el.insertBefore(btn, pre);
        }
        new Clipboard('.copy-btn');
    };

    function onReady(fn) {
        if (document.addEventListener) {
            document.addEventListener('DOMContentLoaded', fn);
        } else {
            document.attachEvent('onreadystatechange', function() {
                if (document.readyState === 'interactive')
                    fn();
            });
        }
    }

    onReady(function(){
        clipboard_init();
    });
})(document);
</script>
<script src="/composer/unstable/assets/js/nav.js"></script>
<script src="/composer/unstable/assets/js/search_bar.js"></script>

    

    


  </div>
</body>
</html>
