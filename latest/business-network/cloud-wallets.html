<!--
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

 http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
-->
<!doctype html>
<html lang="en">
<!--
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

 http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
-->
  
  
  

<!--
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

 http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
-->
<head>
  <meta charset="utf-8">
  
    <title>Customising card stores | Hyperledger Composer</title>
  
  <meta name="viewport" content="width=device-width">
  <link rel="icon" type="image/x-icon" href="/composer/latest/favicon.ico">
  <meta name="google-site-verification" content="fBQRJ6h7MV7_TJ7grbgq4P-d-07NRfDWPe4pqEEoH5w">
  <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">

  

  
    <link href="/composer/latest/assets/css/normalize.css" rel="stylesheet">
    <link href="/composer/latest/assets/css/new-style.min.css" rel="stylesheet">
    <link href="/composer/latest/assets/css/grid-layout.min.css" rel="stylesheet">
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.6.0/clipboard.min.js"></script>
  
</head>


<body class="">

  
  <!-- % include navbar.html % -->
  

  <div class="SiteWrapper">
    
      <!--
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

 http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
-->
<div class="homepage-callout">
  <div class="callout-copy">
      <p><strong>Update Aug 29th 2019: </strong>Hyperledger Composer has been deprecated. Please see the <a href="https://github.com/hyperledger/composer/blob/master/README.md">README</a> for more information.</p>
  </div>
</div>
<div class="content">
    <article class="docs-container">
        <!-- If there's a sidebar, divide into 2 columns -->
        
        <div class="page-sidebar-grid" id="off-canvas">
          <!-- <a class="toggle close" href="#">close</a> -->
          <div class="docs-pagenav-grid">
            <!--
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

 http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
-->
<!-- Navigation -->
  <nav class="navbar-docs" role="navigation">
        <!-- Brand and toggle get grouped for better mobile display -->
            <a class="navbar-brand" href="/composer/latest/index.html"><b>Hyperledger</b> Composer</a>
        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <div class="top-nav-docs">
                <!-- <li>
                    <a href="services.html">Composer</a>
                </li> -->
                <!-- <li>
                    <a href="https://composer-playground.mybluemix.net/">Playground</a>
                </li> -->
                    <a href="../tutorials/tutorials.html">Tutorials</a>
                    <a href="../introduction/introduction.html">Docs</a>
                    <a href="../support/support-index.html">Community</a>
            </div>
        </div>
</nav>

          </div>

          <select id="version" name="version" onchange="location = this.options[this.selectedIndex].value;">
              <option>Select version</option>
              <option value="/composer/latest/introduction/introduction.html" title="The most stable version of Composer">Latest</option>
              <option value="/composer/unstable/introduction/introduction.html" title="The version that will replace Latest">Latest-unstable</option>
          </select>

            <div class="search-form">
              <form action="/composer/latest/search/search.html" method="get">
                <!-- <label for="search-box">Search</label> -->

                <input type="text" id="search-box"  class="search-box" name="query" placeholder="Search here...">
                <input type="submit" class="submit-input hide" value="">

                <div class="search-icon">
                  <img src="/composer/latest/assets/img/Search_Icon_1.svg" class="trigger" type="submit">
                </div>
              </form>
            </div>

          <div class="docs-current-page-grid">
          <p>Customising card stores</p>
          </div>

          <nav class="context-nav">
            
            
              <ul>
<li><p><a href="/composer/latest/introduction/introduction"><b>Introduction</b><img src="/composer/latest/assets/img/Caret_SW_2.svg" class="caret"></a></p>

<ul>
<li><a href="/composer/latest/introduction/key-concepts">Key Concepts</a></li>
<li><a href="/composer/latest/introduction/solution-architecture">Typical Solution Architecture</a></li>
</ul></li>
<li><p><a href="/composer/latest/installing/installing-index"><b>Installing</b><img src="/composer/latest/assets/img/Caret_SW_2.svg" class="caret"></a></p>

<ul>
<li><a href="/composer/latest/installing/installing-prereqs">Installing pre-requisites</a></li>
<li><a href="/composer/latest/installing/development-tools">Installing the development environment</a></li>
<li><a href="/composer/latest/installing/update-dev-env">Updating the development environment</a></li>
<li><a href="/composer/latest/installing/uninstall-dev-env">Uninstalling the development environment</a></li>
</ul></li>
<li><p><a href="/composer/latest/tutorials/tutorials"><b>Tutorials</b><img src="/composer/latest/assets/img/Caret_SW_2.svg" class="caret"></a></p>

<ul>
<li><a href="/composer/latest/tutorials/playground-tutorial">Playground Tutorial</a></li>
<li><a href="/composer/latest/tutorials/developer-tutorial">Developer Tutorial</a></li>
<li><a href="/composer/latest/tutorials/queries">Queries Tutorial</a></li>
<li><a href="/composer/latest/tutorials/deploy-to-fabric-single-org">Deploying to a single organization Hyperledger Fabric</a></li>
<li><a href="/composer/latest/tutorials/deploy-to-fabric-multi-org">Deploying to a multi-organization Hyperledger Fabric</a></li>
<li><a href="/composer/latest/tutorials/invoke-composer-network">Interacting with other business networks</a></li>
<li><a href="/composer/latest/tutorials/acl-trading">Access Control Tutorial - Commodity Trading</a></li>
<li><a href="/composer/latest/tutorials/google_oauth2_rest">Using Google OAUTH2.0 with a Composer REST server</a></li>
</ul></li>
<li><p><a href="/composer/latest/playground/playground-index"><b>Using Playground</b><img src="/composer/latest/assets/img/Caret_SW_2.svg" class="caret"></a></p>

<ul>
<li><a href="/composer/latest/playground/id-cards-playground">Business Network Cards</a></li>
</ul></li>
<li><p><a href="/composer/latest/business-network/business-network-index"><b>Developing Business Networks</b><img src="/composer/latest/assets/img/Caret_SW_2.svg" class="caret"></a></p>

<ul>
<li><a href="/composer/latest/business-network/businessnetworkdefinition">Business Network Definitions</a></li>
<li><a href="/composer/latest/business-network/bnd-create">Create a Business Network Definition</a></li>
<li><a href="/composer/latest/business-network/bnd-deploy">Deploying Business Networks</a></li>
<li><a href="/composer/latest/business-network/publishing-events">Emitting Events</a></li>
<li><a href="/composer/latest/business-network/testing">Testing Business Networks</a></li>
<li><a href="/composer/latest/business-network/bnd-publish">Publish Models or Business Network Definitions</a></li>
<li><a href="/composer/latest/business-network/upgrading-bna">Upgrading a deployed business network</a></li>
<li><a href="/composer/latest/business-network/query">Using Queries and Filters with Business Network Data</a></li>
<li><a href="/composer/latest/business-network/programmatic-access-control">Programmatic access control</a></li>
<li><a href="/composer/latest/business-network/historian">Hyperledger Composer Historian</a></li>
<li><a href="/composer/latest/business-network/cloud-wallets">Customising card stores</a></li>
</ul></li>
<li><p><a href="/composer/latest/applications/applications-index"><b>Developing Applications</b><img src="/composer/latest/assets/img/Caret_SW_2.svg" class="caret"></a></p>

<ul>
<li><a href="/composer/latest/applications/node">Writing a Node.js application</a></li>
<li><a href="/composer/latest/applications/web">Writing Web applications</a></li>
<li><a href="/composer/latest/applications/subscribing-to-events">Subscribing to events</a></li>
</ul></li>
<li><p><a href="/composer/latest/integrating/integrating-index"><b>Integrating Existing Systems</b><img src="/composer/latest/assets/img/Caret_SW_2.svg" class="caret"></a></p>

<ul>
<li><a href="/composer/latest/integrating/getting-started-rest-api">Generating a REST API</a></li>
<li><a href="/composer/latest/integrating/publishing-events">Publishing events from the REST server</a></li>
<li><a href="/composer/latest/integrating/enabling-rest-authentication">Enabling authentication for the REST server</a></li>
<li><a href="/composer/latest/integrating/enabling-multiuser">Enabling multiple user mode for the REST server</a></li>
<li><a href="/composer/latest/integrating/securing-the-rest-server">Securing the REST server using HTTPS and TLS</a></li>
<li><a href="/composer/latest/integrating/deploying-the-rest-server">Deploying the REST server for a business network</a></li>
<li><a href="/composer/latest/integrating/customizing-the-rest-server">Customizing the REST server for a business network</a></li>
<li><a href="/composer/latest/integrating/node-red">Integrating with Node-RED</a></li>
<li><a href="/composer/latest/integrating/call-out">Calling external HTTP or REST services</a></li>
</ul></li>
<li><p><a href="/composer/latest/managing/managingindex"><b>Managing a Deployed Business Network</b><img src="/composer/latest/assets/img/Caret_SW_2.svg" class="caret"></a></p>

<ul>
<li><a href="/composer/latest/managing/participantsandidentities">Participants and identities</a></li>
<li><a href="/composer/latest/managing/participant-add">Adding participants</a></li>
<li><a href="/composer/latest/managing/id-cards-playground">Creating, Exporting, and Importing Business Network Cards</a></li>
<li><a href="/composer/latest/managing/identity-issue">Issuing a new identity to a participant</a></li>
<li><a href="/composer/latest/managing/identity-bind">Binding an existing identity to a participant</a></li>
<li><a href="/composer/latest/managing/identity-list">Listing all identities in a business network</a></li>
<li><a href="/composer/latest/managing/identity-revoke">Revoking an identity from a participant</a></li>
<li><a href="/composer/latest/managing/connector-information">Interacting with Hyperledger Fabric</a></li>
</ul></li>
<li><p><a href="/composer/latest/problems/diagnostics"><b>Diagnosing Problems</b><img src="/composer/latest/assets/img/Caret_SW_2.svg" class="caret"></a></p></li>
<li><p><a href="/composer/latest/reference/reference-index"><b>Reference</b><img src="/composer/latest/assets/img/Caret_SW_2.svg" class="caret"></a></p>

<ul>
<li><a href="/composer/latest/reference/MeetTheModules">Hyperledger Composer npm Modules</a></li>
<li><a href="/composer/latest/reference/cto_language">Modeling Language</a></li>
<li><a href="/composer/latest/reference/acl_language">Access Control Language</a></li>
<li><a href="/composer/latest/reference/query-language">Query Language</a></li>
<li><a href="/composer/latest/reference/model-compatibility">Model Compatibility</a></li>
<li><a href="/composer/latest/reference/connectionprofile">Connection Profiles</a></li>
<li><a href="/composer/latest/reference/js_scripts">Transaction Processor Functions</a></li>
<li><a href="/composer/latest/reference/commands">Hyperledger Composer CLI Commands</a></li>
<li><a href="/composer/latest/reference/rest-server">Hyperledger Composer REST Server</a></li>
<li><a href="/composer/latest/reference/glossary">Hyperledger Composer Glossary of Terms</a></li>
</ul></li>
<li><p><a href="/composer/latest/support/support-index"><b>Support</b><img src="/composer/latest/assets/img/Caret_SW_2.svg" class="caret"></a></p></li>
<li><p><a href="/composer/latest/api/api-doc-index"><b>API Reference</b><img src="/composer/latest/assets/img/Caret_SW_2.svg" class="caret"></a></p>

<ul>
<li><a href="/composer/latest/api/allData">API Class Index</a></li>
<li><a href="/composer/latest/api/admin-adminconnection">AdminConnection (Admin API)</a></li>
<li><a href="/composer/latest/api/client-assetregistry">AssetRegistry (Client API)</a></li>
<li><a href="/composer/latest/api/client-businessnetworkconnection">BusinessNetworkConnection (Client API)</a></li>
<li><a href="/composer/latest/api/client-historian">Historian (Client API)</a></li>
<li><a href="/composer/latest/api/client-identityregistry">IdentityRegistry (Client API)</a></li>
<li><a href="/composer/latest/api/client-participantregistry">ParticipantRegistry (Client API)</a></li>
<li><a href="/composer/latest/api/client-query">Query (Client API)</a></li>
<li><a href="/composer/latest/api/client-registry">Registry (Client API)</a></li>
<li><a href="/composer/latest/api/client-transactionregistry">TransactionRegistry (Client API)</a></li>
<li><a href="/composer/latest/api/common-assetdeclaration">AssetDeclaration (Common API)</a></li>
<li><a href="/composer/latest/api/common-businessnetworkcardstore">BusinessNetworkCardStore (Common API)</a></li>
<li><a href="/composer/latest/api/common-businessnetworkdefinition">BusinessNetworkDefinition (Common API)</a></li>
<li><a href="/composer/latest/api/common-businessnetworkmetadata">BusinessNetworkMetadata (Common API)</a></li>
<li><a href="/composer/latest/api/common-classdeclaration">ClassDeclaration (Common API)</a></li>
<li><a href="/composer/latest/api/common-conceptdeclaration">ConceptDeclaration (Common API)</a></li>
<li><a href="/composer/latest/api/common-concept">Concept (Common API)</a></li>
<li><a href="/composer/latest/api/common-decoratorfactory">DecoratorFactory (Common API)</a></li>
<li><a href="/composer/latest/api/common-decorator">Decorator (Common API)</a></li>
<li><a href="/composer/latest/api/common-enumdeclaration">EnumDeclaration (Common API)</a></li>
<li><a href="/composer/latest/api/common-enumvaluedeclaration">EnumValueDeclaration (Common API)</a></li>
<li><a href="/composer/latest/api/common-eventdeclaration">EventDeclaration (Common API)</a></li>
<li><a href="/composer/latest/api/common-factory">Factory (Common API)</a></li>
<li><a href="/composer/latest/api/common-functiondeclaration">FunctionDeclaration (Common API)</a></li>
<li><a href="/composer/latest/api/common-idcard">IdCard (Common API)</a></li>
<li><a href="/composer/latest/api/common-identifiable">Identifiable (Common API)</a></li>
<li><a href="/composer/latest/api/common-introspector">Introspector (Common API)</a></li>
<li><a href="/composer/latest/api/common-modelfile">ModelFile (Common API)</a></li>
<li><a href="/composer/latest/api/common-modelmanager">ModelManager (Common API)</a></li>
<li><a href="/composer/latest/api/common-participantdeclaration">ParticipantDeclaration (Common API)</a></li>
<li><a href="/composer/latest/api/common-property">Property (Common API)</a></li>
<li><a href="/composer/latest/api/common-relationshipdeclaration">RelationshipDeclaration (Common API)</a></li>
<li><a href="/composer/latest/api/common-relationship">Relationship (Common API)</a></li>
<li><a href="/composer/latest/api/common-resource">Resource (Common API)</a></li>
<li><a href="/composer/latest/api/common-serializer">Serializer (Common API)</a></li>
<li><a href="/composer/latest/api/common-transactiondeclaration">TransactionDeclaration (Common API)</a></li>
<li><a href="/composer/latest/api/common-typed">Typed (Common API)</a></li>
<li><a href="/composer/latest/api/common-validatedconcept">ValidatedConcept (Common API)</a></li>
<li><a href="/composer/latest/api/common-validatedresource">ValidatedResource (Common API)</a></li>
<li><a href="/composer/latest/api/runtime-api">Api (Runtime API)</a></li>
<li><a href="/composer/latest/api/runtime-assetregistry">AssetRegistry (Runtime API)</a></li>
<li><a href="/composer/latest/api/runtime-factory">Factory (Runtime API)</a></li>
<li><a href="/composer/latest/api/runtime-participantregistry">ParticipantRegistry (Runtime API)</a></li>
<li><a href="/composer/latest/api/runtime-query">Query (Runtime API)</a></li>
<li><a href="/composer/latest/api/runtime-serializer">Serializer (Runtime API)</a></li>
</ul></li>
<li><p><a href="/composer/latest/systemns/systemns-index"><b>System Namespace Reference</b><img src="/composer/latest/assets/img/Caret_SW_2.svg" class="caret"></a></p>

<ul>
<li><a href="/composer/latest/systemns/01_summary">Summary</a></li>
<li><a href="/composer/latest/systemns/02_assets">Assets</a></li>
<li><a href="/composer/latest/systemns/03_participants">Participants</a></li>
<li><a href="/composer/latest/systemns/04_transactions">Transactions</a></li>
<li><a href="/composer/latest/systemns/05_events">Events</a></li>
<li><a href="/composer/latest/systemns/06_enums">Enums</a></li>
</ul></li>
</ul>

            
                <div class="docs-footer-grid">
                <!--
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

 http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
-->
<div class="footer-bg-break docs-footer-break">
<div class="footer-container-break">
    <div class="footer-left-break">
      <p>Released under the Apache License v2.0</p>
    </div>
  <div class="footer-right-break">
    <ul>
      <li><a href="https://github.com/hyperledger/composer">GitHub</a></li>
      <li><a href="http://stackoverflow.com/questions/tagged/hyperledger-composer">Stack Overflow</a></li>
    </ul>
  </div>
</div>
</div>

                </div>
          </nav>
        </div>
        <div class="page-content-grid">
          <section class="content-chunk">
            <!-- <a class="toggle open" href="#nav">open</a> -->
            
              <h1 id="customising-the-card-store">Customising the card store</h1>

<p>The default card store is the <code>/home/username/.composer</code> directory on the host machine. Local wallets can be problematic for applications running in cloud environments, and it may be desired to have the card store at different directory location. By using custom wallets, users can control where business network cards and the certificates and private keys used for Hyperledger Fabric authentication are stored.</p>

<h2 id="architecture">Architecture</h2>

<p>Whenever a <code>BusinessNetworkConnection</code> or <code>AdminConnection</code> is made, it has an associated <code>CardStore</code>. Each connection can be configured to use a specific <code>CardStore</code>. In the Hyperledger Composer repository, there are two pre-configured options for stores:</p>

<ul>
<li><code>composer-wallet-filesystem</code></li>
<li><code>composer-wallet-inmemory</code></li>
</ul>

<p>Custom implementations can be written for any given backend database or object store, enabling the specification of a <code>CardStore</code> that is in a non-default file location, a separate docker container, or hosted in a cloud based data store. The store configuration can be completed using either a configuration file, or by using environment variables.</p>

<p>Multiple cloud wallet implementations can be installed using global npm installs.</p>

<h1 id="configuring-a-custom-wallet">Configuring a custom wallet</h1>

<p>There are two ways to define the configuration for a custom wallet: by using a <code>.json</code> configuration file, or by defining environment variables.</p>

<blockquote>
<p>Please note: any custom wallet implementation <strong>must</strong> include the <code>composer-wallet</code> prefix in the module name.</p>
</blockquote>

<h2 id="using-a-configuration-file">Using a configuration file</h2>

<p>For production deployments, it is more useful to be able to configure the card store outside of the application,
Hyperledger Composer uses the standard configuration module <code>config</code>. The configuration file is loaded from a sub-directory of the current working directory called <code>config</code>.  The default configuration file is called <code>default.json</code>, the configuration file name can be changed using the <code>NODE_ENV</code> environment variable.</p>

<p>For example here is a configuration for a cloud wallet implementation called <code>composer-wallet-redis</code></p>
<div class="highlight"><pre><code class="language-" data-lang="">{
  "composer": {
    "wallet": {
      "type": "composer-wallet-redis",
      "desc": "Uses a local redis instance,
      "options": {

      }
    }
  }
}
</code></pre></div>
<ul>
<li><code>type</code> is the name of this module</li>
<li><code>desc</code> is some text for the humans</li>
</ul>

<blockquote>
<p>Please note: Each connection will have a new instance of the card store specified. If these resolve to the same backend store, cards can be shared.</p>
</blockquote>

<h2 id="using-an-environment-variable">Using an environment variable</h2>

<p>Specifying the details of a custom wallet on the command line via environment variables may be achieved by setting an environment variable containing the same information as the configuration file.</p>

<p>The following environment variable example uses the same format and data as the preceding configuration file.</p>
<div class="highlight"><pre><code class="language-" data-lang="">export NODE_CONFIG={"composer":{"wallet":{"type":"composer-wallet-redis","desc":"Uses  a local redis instance,"options":{}}}}
</code></pre></div>
<p>Any application that is in this shell will use the cloud wallets.</p>

<h1 id="configuring-file-system-custom-card-stores">Configuring file system custom card stores</h1>

<p>The location of the file system card store can be changed using a configuration file, through specification of a <code>storePath</code> as one of the wallet options.</p>
<div class="highlight"><pre><code class="language-" data-lang="">{
  "composer": {
    "wallet" : {
        "type": "composer-wallet-filesystem",
        "options" : {
            "storePath" : "/my/network/location"
        }
    }
}
</code></pre></div>
<p>The same <code>.json</code> snippet may be exported as an environment variable.</p>

<h1 id="configuring-cloud-based-custom-card-stores">Configuring cloud based custom card stores</h1>

<p>The following GitHub repositories contain implementations of cloud custom wallets using Redis and the IBM Cloud Object Store, respectively.</p>

<ul>
<li><a href="https://github.com/hyperledger/composer-tools/tree/master/packages/composer-wallet-redis">composer-tools/composer-wallet-redis</a>   - provides a backing store using a Redis server</li>
<li><a href="https://github.com/hyperledger/composer-tools/tree/master/packages/composer-wallet-ibmcos">composer-tools/composer-wallet-ibmcos</a>  - provides a backing store using the IBM Cloud Object Store. This has an S3 compatible API</li>
<li><a href="https://github.com/hyperledger/composer-tools/tree/master/packages/composer-wallet-cloudant">composer-tools/composer-wallet-cloudant</a>  - provides a backing store using the IBM Cloudant</li>
</ul>

<p>Multiple cloud custom wallet implementations can be installed using global npm installs.</p>

<p>To migrate to these custom wallet solutions, refer to the README files of the relevant GitHub repository.</p>

<p>In a general sense, migrating to a cloud wallet implementation has three steps.</p>

<ol>
<li>Export the business network cards you wish to use in the cloud custom wallet.</li>
<li>Change configuration to specify the cloud custom wallet.</li>
<li>Import the business network cards into the cloud custom wallet.</li>
</ol>

<p>The <code>composer-wallet-filesystem</code> is the default card store and follows the same layout on disc, and by default is in the same location.</p>

<p>Some samples and test cases show the card stores being created programmatically. This is still possible and but is slightly different in terms of initial creation of the card store.</p>

<h1 id="using-custom-wallets-with-apis">Using custom wallets with APIs</h1>

<h2 id="api-cardstore-configuration">API CardStore configuration</h2>

<p>Using the default location file system card store remains the default option within API calls. For instance:</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript">        <span class="nx">adminConnection</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">AdminConnection</span><span class="p">();</span>
        <span class="nx">clientConnection</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">BusinessNetworkConnection</span><span class="p">();</span>
</code></pre></div>
<p>will use the file system card store at the location <code>/home/username/.composer</code>, or pick up on the exported custom wallet specified within <code>NODE_CONFIG</code> if and only if executing within the same shell instance.</p>

<p>To specify a custom wallet within the API, without the use of a globally exported value, it must be included as an option passed to the connection:</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript">        <span class="kd">const</span> <span class="nx">connectionOptions</span> <span class="o">=</span> <span class="p">{</span>
            <span class="na">wallet</span> <span class="p">:</span> <span class="p">{</span>
                <span class="na">type</span><span class="p">:</span> <span class="dl">'</span><span class="s1">composer-wallet-filesystem</span><span class="dl">'</span><span class="p">,</span>
                <span class="na">options</span> <span class="p">:</span> <span class="p">{</span>
                    <span class="na">storePath</span> <span class="p">:</span><span class="dl">'</span><span class="s1">/my/network/location</span><span class="dl">'</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">};</span>
        <span class="nx">adminConnection</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">AdminConnection</span><span class="p">(</span><span class="nx">connectionOptions</span><span class="p">);</span>
        <span class="nx">clientConnection</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">BusinessNetworkConnection</span><span class="p">(</span><span class="nx">connectionOptions</span><span class="p">);</span>
</code></pre></div>
<p>In the above, the wallet type may be that of a new file location, or a cloud based location.</p>

<h2 id="api-memorycardstore-configuration">API MemoryCardStore configuration</h2>

<p>Previously to use the in MemoryCardStore, the code would have been written</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript">        <span class="nx">cardStore</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">MemoryCardStore</span><span class="p">();</span>
        <span class="kd">const</span> <span class="nx">adminConnectionOptions</span> <span class="o">=</span> <span class="p">{</span>
            <span class="na">cardStore</span> <span class="p">:</span> <span class="nx">cardStore</span>
        <span class="p">};</span>
        <span class="nx">adminConnection</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">AdminConnection</span><span class="p">(</span><span class="nx">adminConnectionOptions</span><span class="p">);</span>
        <span class="c1">// or more concisely</span>
        <span class="nx">clientConnection</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">BusinessNetworkConnection</span><span class="p">({</span><span class="nx">cardStore</span><span class="p">});</span>
</code></pre></div>
<p>This has now changed and Card stores must now be specified differently:</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript">        <span class="kd">const</span> <span class="nx">connectionOptions</span> <span class="o">=</span> <span class="p">{</span>
            <span class="na">wallet</span> <span class="p">:</span> <span class="p">{</span>
                <span class="na">type</span><span class="p">:</span> <span class="dl">'</span><span class="s1">composer-wallet-inmemory</span><span class="dl">'</span>
            <span class="p">}</span>
        <span class="p">};</span>
        <span class="nx">adminConnection</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">AdminConnection</span><span class="p">(</span><span class="nx">connectionOptions</span><span class="p">);</span>
        <span class="nx">clientConnection</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">BusinessNetworkConnection</span><span class="p">(</span><span class="nx">connectionOptions</span><span class="p">);</span>
</code></pre></div>
<h1 id="cloud-wallets-and-hyperledger-composer-rest-server">Cloud Wallets and Hyperledger Composer Rest Server</h1>

<p>For convenience, the latest Hyperledger Composer Rest Server docker image will have all the cloud wallets available on the github repository for composer-tools preloaded into the image.</p>

            
          </section>
        </div>
        <!-- Otherwise, have the main content fill all 12 columns... -->
        
      <div class="PageNavigation">
    
    
  </div>
    </article>
</div>
<script>
(function (document) {
    function clipboard_init() {
        var charts = document.querySelectorAll("div.highlight"),
            arr = [],
            i, j, maxItem, pre, btn, el;

        // Make sure we are dealing with an array
        for(i = 0, maxItem = charts.length; i < maxItem; i++) arr.push(charts[i]);

        // Find the UML source element and get the text
        for (i = 0, maxItem = arr.length; i < maxItem; i++) {
            el = arr[i];
            pre = el.childNodes[0];

            pre.id = "hl_code" + i.toString();
            btn = document.createElement('copy-button');
            btn.appendChild(document.createTextNode('Copy'));
            btn.setAttribute("class", "copy-btn");
            btn.setAttribute("data-clipboard-target", "#hl_code" + i.toString());
            el.insertBefore(btn, pre);
        }
        new Clipboard('.copy-btn');
    };

    function onReady(fn) {
        if (document.addEventListener) {
            document.addEventListener('DOMContentLoaded', fn);
        } else {
            document.attachEvent('onreadystatechange', function() {
                if (document.readyState === 'interactive')
                    fn();
            });
        }
    }

    onReady(function(){
        clipboard_init();
    });
})(document);
</script>
<script src="/composer/latest/assets/js/nav.js"></script>
<script src="/composer/latest/assets/js/search_bar.js"></script>

    

    


  </div>
</body>
</html>
